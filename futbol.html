<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Avanzado de Registro de Jugadores de Fútbol</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #1a472a;
            --secondary-color: #2ecc71;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --sidebar-width: 250px;
            --header-height: 70px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0d2e1a 100%);
            color: white;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(26, 71, 42, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.2);
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .logo {
            text-align: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo h2 {
            color: var(--secondary-color);
            font-size: 1.5rem;
        }
        
        .logo p {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .nav-link:hover {
            background: rgba(46, 204, 113, 0.1);
            border-left-color: var(--secondary-color);
        }
        
        .nav-link.active {
            background: rgba(46, 204, 113, 0.2);
            border-left-color: var(--secondary-color);
            font-weight: bold;
        }
        
        .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            height: var(--header-height);
            background: rgba(44, 62, 80, 0.9);
            backdrop-filter: blur(10px);
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 99;
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* Content Area */
        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Cards */
        .card {
            background: rgba(44, 62, 80, 0.7);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-title {
            font-size: 1.3rem;
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--dark-color) 0%, #1a472a 100%);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-decoration: none;
        }
        
        .btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background: var(--success-color);
        }
        
        .btn-success:hover {
            background: #219653;
        }
        
        .btn-warning {
            background: var(--warning-color);
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-danger {
            background: var(--danger-color);
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-info {
            background: var(--info-color);
        }
        
        .btn-info:hover {
            background: #2980b9;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.2);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        /* Camera - Estilos mejorados */
        .camera-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            aspect-ratio: 16/9;
            background: #000;
        }
        
        #cameraFeed {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transform: scaleX(1);
        }
        
        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .face-frame {
            position: absolute;
            border: 2px solid var(--success-color);
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
            background: rgba(46, 204, 113, 0.1);
        }
        
        .camera-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        /* Results */
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: rgba(44, 62, 80, 0.8);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            border-left: 4px solid var(--secondary-color);
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .result-name {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .result-confidence {
            background: var(--success-color);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .result-details {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(44, 62, 80, 0.7);
        }
        
        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .data-table th {
            background: rgba(26, 71, 42, 0.9);
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .data-table tr:hover {
            background: rgba(46, 204, 113, 0.1);
        }
        
        /* Charts */
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        
        /* Progress bars */
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--secondary-color);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Tabs */
        .content-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .content-tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .content-tab.active {
            border-bottom-color: var(--secondary-color);
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        .content-tab:hover {
            background: rgba(46, 204, 113, 0.1);
        }
        
        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            background: var(--dark-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-success {
            border-left: 4px solid var(--success-color);
        }
        
        .notification-error {
            border-left: 4px solid var(--danger-color);
        }
        
        .notification-warning {
            border-left: 4px solid var(--warning-color);
        }
        
        /* Image preview */
        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        
        .preview-image {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 120px;
        }
        
        .preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }
        
        /* Upload area */
        .image-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .image-upload-area:hover {
            border-color: var(--secondary-color);
            background: rgba(46, 204, 113, 0.05);
        }
        
        .image-upload-area i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.7;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .nav-menu {
                display: flex;
                overflow-x: auto;
            }
            
            .nav-item {
                flex-shrink: 0;
            }
            
            .nav-link {
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            .nav-link.active {
                border-left: none;
                border-bottom: 3px solid var(--secondary-color);
            }
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .camera-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            /* Vista móvil para cámara */
            .camera-container {
                max-width: 100%;
                border-radius: 0;
                margin-bottom: 15px;
            }
            
            .camera-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 0 10px;
            }
            
            .camera-controls .btn {
                width: 100%;
                justify-content: center;
                padding: 12px;
                font-size: 1rem;
            }
            
            .camera-status {
                padding: 0 10px;
            }
            
            .status-indicators {
                flex-direction: column;
                gap: 10px;
            }
            
            /* Orientación vertical en móviles */
            @media (orientation: portrait) {
                .camera-container {
                    aspect-ratio: 9/16;
                }
                
                #cameraFeed {
                    object-fit: contain;
                }
            }
            
            /* Orientación horizontal en móviles */
            @media (orientation: landscape) {
                .camera-container {
                    aspect-ratio: 16/9;
                }
            }
        }
        
        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .badge-success {
            background: var(--success-color);
        }
        
        .badge-warning {
            background: var(--warning-color);
        }
        
        .badge-danger {
            background: var(--danger-color);
        }
        
        .badge-info {
            background: var(--info-color);
        }
        
        /* Security levels */
        .security-levels {
            display: flex;
            gap: 15px;
        }
        
        .security-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        /* Range inputs */
        .range-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Status indicators */
        .status-indicators {
            display: flex;
            gap: 20px;
        }
        
        .status-item {
            display: flex;
            gap: 8px;
        }
        
        .status-label {
            opacity: 0.8;
        }
        
        .status-value {
            font-weight: bold;
        }
        
        /* No results state */
        .no-results {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.7;
        }
        
        .no-results i {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        /* Nuevos estilos para cámara responsive */
        
        /* Indicador de orientación para móviles */
        .orientation-warning {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            z-index: 1000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        
        .orientation-warning i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--warning-color);
        }
        
        .orientation-warning p {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) and (orientation: portrait) {
            .orientation-warning {
                display: flex;
            }
        }
        
        /* Botones de cámara flotantes para móviles */
        .mobile-camera-controls {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            gap: 15px;
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .mobile-camera-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-camera-btn.primary {
            background: var(--secondary-color);
            color: white;
        }
        
        .mobile-camera-btn.danger {
            background: var(--danger-color);
            color: white;
        }
        
        .mobile-camera-btn.success {
            background: var(--success-color);
            color: white;
        }
        
        .mobile-camera-btn.warning {
            background: var(--warning-color);
            color: white;
        }
        
        .mobile-camera-btn:hover {
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .mobile-camera-controls {
                display: flex;
            }
            
            /* Ocultar controles de escritorio en móviles */
            .camera-controls {
                display: none;
            }
        }
        
        /* Indicador de cámara activa */
        .camera-active-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .camera-active-indicator .pulse-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
            animation: pulse 1.5s infinite;
        }
        
        /* Selector de cámara para dispositivos con múltiples cámaras */
        .camera-selector {
            display: none;
            margin-bottom: 15px;
        }
        
        .camera-selector select {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @media (max-width: 768px) {
            .camera-selector {
                display: block;
                padding: 0 10px;
            }
        }
        
        /* Efectos de cámara para mejorar la experiencia móvil */
        .camera-effects {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .effect-btn {
            padding: 8px 15px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .effect-btn.active {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        /* Mejoras para tablets */
        @media (min-width: 769px) and (max-width: 1024px) {
            .camera-container {
                max-width: 90%;
            }
            
            .camera-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .camera-controls .btn {
                flex: 0 0 calc(33.333% - 10px);
            }
        }

        /* Estilos específicos para fútbol */
        .player-position {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 2px;
        }
        
        .position-portero { background: #e74c3c; }
        .position-defensa { background: #3498db; }
        .position-medio { background: #f39c12; }
        .position-delantero { background: #2ecc71; }
        
        .skill-bar {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .skill-label {
            width: 120px;
            font-size: 0.9rem;
        }
        
        .skill-value {
            width: 40px;
            text-align: right;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2><i class="fas fa-futbol"></i> FootballScout Pro</h2>
                <p>Sistema de Registro de Jugadores</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-tab="dashboard">
                        <i class="fas fa-home"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="register">
                        <i class="fas fa-user-plus"></i> Registrar Jugador
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="camera">
                        <i class="fas fa-camera"></i> Cámara en Vivo
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="search">
                        <i class="fas fa-search"></i> Buscar Jugador
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="manage">
                        <i class="fas fa-users"></i> Gestionar Jugadores
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="reports">
                        <i class="fas fa-chart-bar"></i> Reportes
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-tab="settings">
                        <i class="fas fa-cogs"></i> Configuración
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-title">Dashboard Principal</div>
                <div class="user-menu">
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="user-avatar">SC</div>
                </div>
            </div>
            
            <!-- Content Area -->
            <div class="content">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #2ecc71;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="totalPlayers">0</div>
                            <div class="stat-label">Jugadores Registrados</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #3498db;">
                                <i class="fas fa-camera"></i>
                            </div>
                            <div class="stat-value" id="totalImages">0</div>
                            <div class="stat-label">Imágenes Procesadas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #f39c12;">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="stat-value" id="totalSearches">0</div>
                            <div class="stat-label">Búsquedas Realizadas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #e74c3c;">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-value" id="scoutingRate">0%</div>
                            <div class="stat-label">Tasa de Scouting</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Actividad Reciente</div>
                            <div class="card-actions">
                                <button class="btn btn-info" id="refreshActivity">
                                    <i class="fas fa-sync-alt"></i> Actualizar
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha/Hora</th>
                                        <th>Scout</th>
                                        <th>Acción</th>
                                        <th>Detalles</th>
                                        <th>Estado</th>
                                    </tr>
                                </thead>
                                <tbody id="activityTable">
                                    <!-- Activity data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="card" style="flex: 1;">
                            <div class="card-header">
                                <div class="card-title">Rendimiento del Sistema</div>
                            </div>
                            <div class="chart-container">
                                <canvas id="performanceChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="card" style="flex: 1;">
                            <div class="card-header">
                                <div class="card-title">Distribución por Posición</div>
                            </div>
                            <div class="chart-container">
                                <canvas id="positionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Register Tab -->
                <div class="tab-content" id="register">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Registrar Nuevo Jugador</div>
                            <div class="card-actions">
                                <button class="btn btn-info" id="quickRegisterBtn">
                                    <i class="fas fa-bolt"></i> Registro Rápido
                                </button>
                            </div>
                        </div>
                        
                        <form id="registerForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="playerName">Nombre completo *</label>
                                    <input type="text" id="playerName" class="form-control" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="playerNumber">Número/Dorsal</label>
                                    <input type="number" id="playerNumber" class="form-control" min="1" max="99">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="playerAge">Edad</label>
                                    <input type="number" id="playerAge" class="form-control" min="16" max="45">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="playerNationality">Nacionalidad</label>
                                    <input type="text" id="playerNationality" class="form-control">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="playerPosition">Posición Principal</label>
                                    <select id="playerPosition" class="form-control" required>
                                        <option value="">Seleccionar</option>
                                        <option value="Portero">Portero</option>
                                        <option value="Defensa">Defensa</option>
                                        <option value="Mediocampista">Mediocampista</option>
                                        <option value="Delantero">Delantero</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="playerTeam">Equipo Actual</label>
                                    <input type="text" id="playerTeam" class="form-control">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Habilidades Técnicas (1-10)</label>
                                <div class="skill-bar">
                                    <div class="skill-label">Regate</div>
                                    <div class="skill-value" id="dribblingValue">5</div>
                                    <input type="range" id="dribbling" class="form-control" min="1" max="10" value="5">
                                </div>
                                <div class="skill-bar">
                                    <div class="skill-label">Tiro</div>
                                    <div class="skill-value" id="shootingValue">5</div>
                                    <input type="range" id="shooting" class="form-control" min="1" max="10" value="5">
                                </div>
                                <div class="skill-bar">
                                    <div class="skill-label">Pase</div>
                                    <div class="skill-value" id="passingValue">5</div>
                                    <input type="range" id="passing" class="form-control" min="1" max="10" value="5">
                                </div>
                                <div class="skill-bar">
                                    <div class="skill-label">Defensa</div>
                                    <div class="skill-value" id="defenseValue">5</div>
                                    <input type="range" id="defense" class="form-control" min="1" max="10" value="5">
                                </div>
                                <div class="skill-bar">
                                    <div class="skill-label">Físico</div>
                                    <div class="skill-value" id="physicalValue">5</div>
                                    <input type="range" id="physical" class="form-control" min="1" max="10" value="5">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="playerValue">Valor de Mercado (€)</label>
                                <input type="number" id="playerValue" class="form-control" min="0" step="1000">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="playerTags">Etiquetas (separadas por comas)</label>
                                <input type="text" id="playerTags" class="form-control" placeholder="promesa, goleador, capitán, ...">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="playerNotes">Observaciones del Scout</label>
                                <textarea id="playerNotes" class="form-control" rows="3"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Imágenes del jugador *</label>
                                <div class="image-upload-container">
                                    <div id="imagePreview" class="image-preview-grid"></div>
                                    <div class="upload-actions" style="display: flex; gap: 10px; margin-top: 15px;">
                                        <button type="button" class="btn btn-info" id="addImagesBtn">
                                            <i class="fas fa-plus"></i> Añadir Imágenes
                                        </button>
                                        <button type="button" class="btn btn-warning" id="captureFromCameraBtn">
                                            <i class="fas fa-camera"></i> Capturar desde Cámara
                                        </button>
                                        <button type="button" class="btn btn-danger" id="clearImagesBtn">
                                            <i class="fas fa-trash"></i> Limpiar Lista
                                        </button>
                                    </div>
                                    <input type="file" id="imageUpload" accept="image/*" multiple style="display: none;">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Nivel de prospecto</label>
                                <div class="security-levels">
                                    <label class="security-option">
                                        <input type="radio" name="prospectLevel" value="local" checked>
                                        <span class="badge badge-info">Local</span>
                                    </label>
                                    <label class="security-option">
                                        <input type="radio" name="prospectLevel" value="nacional">
                                        <span class="badge badge-warning">Nacional</span>
                                    </label>
                                    <label class="security-option">
                                        <input type="radio" name="prospectLevel" value="internacional">
                                        <span class="badge badge-danger">Internacional</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-actions" style="display: flex; gap: 10px; margin-top: 20px;">
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-save"></i> Registrar Jugador
                                </button>
                                <button type="button" class="btn btn-warning" id="resetFormBtn">
                                    <i class="fas fa-undo"></i> Limpiar Formulario
                                </button>
                            </div>
                        </form>
                        
                        <div id="registerResult" class="result-message" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- Camera Tab -->
                <div class="tab-content" id="camera">
                    <!-- Advertencia de orientación para móviles -->
                    <div class="orientation-warning">
                        <i class="fas fa-sync-alt"></i>
                        <p>Para una mejor experiencia</p>
                        <p>Gira tu dispositivo a modo horizontal</p>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Cámara en Vivo - Identificación de Jugadores</div>
                            <div class="card-actions">
                                <button class="btn btn-info" id="cameraSettingsBtn">
                                    <i class="fas fa-cog"></i> Configuración
                                </button>
                            </div>
                        </div>
                        
                        <!-- Selector de cámara para móviles -->
                        <div class="camera-selector">
                            <select id="cameraSelect">
                                <option value="">Seleccionar cámara...</option>
                            </select>
                        </div>
                        
                        <div class="camera-container">
                            <video id="cameraFeed" autoplay playsinline></video>
                            <div class="camera-active-indicator">
                                <div class="pulse-dot"></div>
                                <span>En vivo</span>
                            </div>
                            <div class="camera-overlay" id="cameraOverlay"></div>
                        </div>
                        
                        <!-- Efectos de cámara -->
                        <div class="camera-effects">
                            <button class="effect-btn active" data-effect="normal">Normal</button>
                            <button class="effect-btn" data-effect="grayscale">Escala de grises</button>
                            <button class="effect-btn" data-effect="sepia">Sepia</button>
                            <button class="effect-btn" data-effect="invert">Invertir</button>
                        </div>
                        
                        <!-- Controles de escritorio -->
                        <div class="camera-controls">
                            <button class="btn btn-success" id="startCameraBtn">
                                <i class="fas fa-play"></i> Iniciar Cámara
                            </button>
                            <button class="btn btn-danger" id="stopCameraBtn">
                                <i class="fas fa-stop"></i> Detener Cámara
                            </button>
                            <button class="btn btn-warning" id="capturePhotoBtn">
                                <i class="fas fa-camera"></i> Capturar Foto
                            </button>
                            <button class="btn btn-info" id="identifyBtn">
                                <i class="fas fa-search"></i> Identificar en Tiempo Real
                            </button>
                            <button class="btn btn-success" id="multiFaceBtn">
                                <i class="fas fa-users"></i> Detección Múltiple
                            </button>
                            <button class="btn btn-warning" id="switchCameraBtn">
                                <i class="fas fa-sync-alt"></i> Cambiar Cámara
                            </button>
                        </div>
                        
                        <!-- Controles móviles -->
                        <div class="mobile-camera-controls">
                            <button class="mobile-camera-btn primary" id="mobileStartBtn">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="mobile-camera-btn danger" id="mobileStopBtn">
                                <i class="fas fa-stop"></i>
                            </button>
                            <button class="mobile-camera-btn success" id="mobileCaptureBtn">
                                <i class="fas fa-camera"></i>
                            </button>
                            <button class="mobile-camera-btn warning" id="mobileSwitchBtn">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        
                        <div class="camera-status">
                            <div class="status-indicators">
                                <div class="status-item">
                                    <span class="status-label">Estado:</span>
                                    <span class="status-value" id="cameraStatus">Inactivo</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Jugadores detectados:</span>
                                    <span class="status-value" id="facesDetected">0</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">FPS:</span>
                                    <span class="status-value" id="cameraFPS">0</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Dispositivo:</span>
                                    <span class="status-value" id="deviceType">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Registro desde Cámara</div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="cameraPlayerName">Nombre para registro</label>
                                <input type="text" id="cameraPlayerName" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Capturas realizadas: <span id="capturesCount">0</span></label>
                                <div id="cameraCapturesPreview" class="image-preview-grid"></div>
                            </div>
                            
                            <button class="btn btn-success" id="registerFromCameraBtn">
                                <i class="fas fa-user-plus"></i> Registrar Jugador desde Cámara
                            </button>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Resultados de Identificación</div>
                            </div>
                            <div class="results-container" id="cameraResults">
                                <div class="no-results">
                                    <i class="fas fa-search"></i>
                                    <p>Los resultados de identificación aparecerán aquí</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Search Tab -->
                <div class="tab-content" id="search">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Búsqueda de Jugadores</div>
                            <div class="card-actions">
                                <button class="btn btn-info" id="advancedSearchBtn">
                                    <i class="fas fa-sliders-h"></i> Búsqueda Avanzada
                                </button>
                            </div>
                        </div>
                        
                        <div class="content-tabs">
                            <div class="content-tab active" data-search-type="image">Por Imagen</div>
                            <div class="content-tab" data-search-type="camera">Desde Cámara</div>
                            <div class="content-tab" data-search-type="filters">Por Filtros</div>
                        </div>
                        
                        <div class="search-content">
                            <!-- Image Search -->
                            <div class="search-type active" data-type="image">
                                <div class="form-group">
                                    <label class="form-label">Imagen para buscar</label>
                                    <div class="image-upload-area" id="searchImageUpload">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Arrastra una imagen aquí o haz clic para seleccionar</p>
                                        <input type="file" id="searchImageFile" accept="image/*" style="display: none;">
                                    </div>
                                    <div id="searchImagePreview" class="image-preview"></div>
                                </div>
                            </div>
                            
                            <!-- Camera Search -->
                            <div class="search-type" data-type="camera">
                                <div class="camera-container small">
                                    <video id="searchCameraFeed" autoplay playsinline></video>
                                </div>
                                <div class="camera-controls">
                                    <button class="btn btn-success" id="startSearchCameraBtn">
                                        <i class="fas fa-camera"></i> Activar Cámara
                                    </button>
                                    <button class="btn btn-info" id="captureSearchImageBtn">
                                        <i class="fas fa-camera-retro"></i> Usar esta Imagen
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Filter Search -->
                            <div class="search-type" data-type="filters">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="searchName">Nombre</label>
                                        <input type="text" id="searchName" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="searchPosition">Posición</label>
                                        <select id="searchPosition" class="form-control">
                                            <option value="">Cualquier posición</option>
                                            <option value="Portero">Portero</option>
                                            <option value="Defensa">Defensa</option>
                                            <option value="Mediocampista">Mediocampista</option>
                                            <option value="Delantero">Delantero</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="searchAgeFrom">Edad (desde-hasta)</label>
                                        <div class="range-inputs">
                                            <input type="number" id="searchAgeFrom" class="form-control" placeholder="16" min="16" max="45">
                                            <span>a</span>
                                            <input type="number" id="searchAgeTo" class="form-control" placeholder="35" min="16" max="45">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="searchTeam">Equipo</label>
                                        <input type="text" id="searchTeam" class="form-control">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="searchTags">Etiquetas</label>
                                    <input type="text" id="searchTags" class="form-control" placeholder="promesa, goleador, capitán, ...">
                                </div>
                            </div>
                        </div>
                        
                        <div class="search-options">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="maxResults">Resultados máximos</label>
                                    <select id="maxResults" class="form-control">
                                        <option value="5">5</option>
                                        <option value="10" selected>10</option>
                                        <option value="20">20</option>
                                        <option value="50">50</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="minConfidence">Confianza mínima</label>
                                    <select id="minConfidence" class="form-control">
                                        <option value="0.3">30%</option>
                                        <option value="0.5">50%</option>
                                        <option value="0.6" selected>60%</option>
                                        <option value="0.7">70%</option>
                                        <option value="0.8">80%</option>
                                        <option value="0.9">90%</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="searchAlgorithm">Algoritmo de búsqueda</label>
                                    <select id="searchAlgorithm" class="form-control">
                                        <option value="standard">Estándar</option>
                                        <option value="advanced">Avanzado</option>
                                        <option value="deep">Aprendizaje Profundo</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="search-actions" style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" id="searchBtn">
                                <i class="fas fa-search"></i> Iniciar Búsqueda
                            </button>
                            <button class="btn btn-warning" id="saveSearchBtn">
                                <i class="fas fa-save"></i> Guardar Búsqueda
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Resultados de Búsqueda</div>
                            <div class="card-actions">
                                <button class="btn btn-info" id="exportResultsBtn">
                                    <i class="fas fa-download"></i> Exportar Resultados
                                </button>
                            </div>
                        </div>
                        <div class="results-container" id="searchResults">
                            <div class="no-results">
                                <i class="fas fa-search"></i>
                                <p>Realice una búsqueda para ver los resultados</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Manage Tab -->
                <div class="tab-content" id="manage">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Gestión de Jugadores Registrados</div>
                            <div class="card-actions">
                                <button class="btn btn-success" id="addPlayerBtn">
                                    <i class="fas fa-user-plus"></i> Agregar Jugador
                                </button>
                                <button class="btn btn-info" id="refreshListBtn">
                                    <i class="fas fa-sync-alt"></i> Actualizar
                                </button>
                                <button class="btn btn-warning" id="bulkActionsBtn">
                                    <i class="fas fa-tasks"></i> Acciones Masivas
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-controls">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="filterPosition">Filtrar por posición</label>
                                    <select id="filterPosition" class="form-control">
                                        <option value="">Todas las posiciones</option>
                                        <option value="Portero">Portero</option>
                                        <option value="Defensa">Defensa</option>
                                        <option value="Mediocampista">Mediocampista</option>
                                        <option value="Delantero">Delantero</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="filterStatus">Filtrar por estado</label>
                                    <select id="filterStatus" class="form-control">
                                        <option value="">Todos los estados</option>
                                        <option value="active">Activo</option>
                                        <option value="inactive">Inactivo</option>
                                        <option value="scouted">Scouteado</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="searchTable">Buscar</label>
                                    <input type="text" id="searchTable" class="form-control" placeholder="Nombre, equipo, posición...">
                                </div>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table" id="playersTable">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAll"></th>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Edad</th>
                                        <th>Posición</th>
                                        <th>Equipo</th>
                                        <th>Número</th>
                                        <th>Valor (€)</th>
                                        <th>Estado</th>
                                        <th>Fecha Registro</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Players data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-footer" style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                            <div class="table-info">
                                Mostrando <span id="showingCount">0</span> de <span id="totalCount">0</span> registros
                            </div>
                            <div class="pagination" style="display: flex; gap: 10px; align-items: center;">
                                <button class="btn btn-sm" id="prevPage"><i class="fas fa-chevron-left"></i></button>
                                <span class="page-info">Página <span id="currentPage">1</span> de <span id="totalPages">1</span></span>
                                <button class="btn btn-sm" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reports Tab -->
                <div class="tab-content" id="reports">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Reportes y Estadísticas</div>
                            <div class="card-actions">
                                <button class="btn btn-success" id="generateReportBtn">
                                    <i class="fas fa-file-pdf"></i> Generar Reporte PDF
                                </button>
                                <button class="btn btn-info" id="exportDataBtn">
                                    <i class="fas fa-file-excel"></i> Exportar Datos
                                </button>
                            </div>
                        </div>
                        
                        <div class="content-tabs">
                            <div class="content-tab active" data-report="summary">Resumen</div>
                            <div class="content-tab" data-report="usage">Uso del Sistema</div>
                            <div class="content-tab" data-report="performance">Rendimiento</div>
                            <div class="content-tab" data-report="custom">Reporte Personalizado</div>
                        </div>
                        
                        <div class="report-content">
                            <div class="report-type active" data-type="summary">
                                <div class="form-row">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="card-title">Resumen General</div>
                                        </div>
                                        <div class="report-summary" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                                            <div class="summary-item" style="text-align: center;">
                                                <div class="summary-value" id="reportTotalPlayers" style="font-size: 2.5rem; font-weight: bold;">0</div>
                                                <div class="summary-label">Jugadores Registrados</div>
                                            </div>
                                            <div class="summary-item" style="text-align: center;">
                                                <div class="summary-value" id="reportTotalImages" style="font-size: 2.5rem; font-weight: bold;">0</div>
                                                <div class="summary-label">Imágenes Procesadas</div>
                                            </div>
                                            <div class="summary-item" style="text-align: center;">
                                                <div class="summary-value" id="reportTotalSearches" style="font-size: 2.5rem; font-weight: bold;">0</div>
                                                <div class="summary-label">Búsquedas Realizadas</div>
                                            </div>
                                            <div class="summary-item" style="text-align: center;">
                                                <div class="summary-value" id="reportScoutingRate" style="font-size: 2.5rem; font-weight: bold;">0%</div>
                                                <div class="summary-label">Tasa de Scouting</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="card-title">Distribución por Posición</div>
                                        </div>
                                        <div class="chart-container">
                                            <canvas id="reportPositionChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Actividad por Fecha</div>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="reportActivityChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="report-type" data-type="usage">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Uso del Sistema</div>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="usageChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="report-type" data-type="performance">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Métricas de Rendimiento</div>
                                    </div>
                                    <div class="accuracy-metrics">
                                        <div class="metric" style="margin-bottom: 15px;">
                                            <div class="metric-label">Identificación de Jugadores</div>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 92%"></div>
                                            </div>
                                            <div class="metric-value">92%</div>
                                        </div>
                                        <div class="metric" style="margin-bottom: 15px;">
                                            <div class="metric-label">Coincidencia de Características</div>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 88%"></div>
                                            </div>
                                            <div class="metric-value">88%</div>
                                        </div>
                                        <div class="metric" style="margin-bottom: 15px;">
                                            <div class="metric-label">Identificación en Tiempo Real</div>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 85%"></div>
                                            </div>
                                            <div class="metric-value">85%</div>
                                        </div>
                                        <div class="metric" style="margin-bottom: 15px;">
                                            <div class="metric-label">Detección Múltiple</div>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 78%"></div>
                                            </div>
                                            <div class="metric-value">78%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="report-type" data-type="custom">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Generar Reporte Personalizado</div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label" for="reportDateFrom">Fecha desde</label>
                                            <input type="date" id="reportDateFrom" class="form-control">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" for="reportDateTo">Fecha hasta</label>
                                            <input type="date" id="reportDateTo" class="form-control">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Tipo de reporte</label>
                                        <div class="report-types" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                            <label class="report-type-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="reportType" value="registrations" checked>
                                                <span>Registros de Jugadores</span>
                                            </label>
                                            <label class="report-type-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="reportType" value="searches">
                                                <span>Actividad de Búsqueda</span>
                                            </label>
                                            <label class="report-type-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="reportType" value="system">
                                                <span>Uso del Sistema</span>
                                            </label>
                                            <label class="report-type-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="reportType" value="performance">
                                                <span>Métricas de Rendimiento</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Formato de salida</label>
                                        <div class="output-formats" style="display: flex; gap: 15px;">
                                            <label class="format-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="outputFormat" value="pdf" checked>
                                                <span>PDF</span>
                                            </label>
                                            <label class="format-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="outputFormat" value="excel">
                                                <span>Excel</span>
                                            </label>
                                            <label class="format-option" style="display: flex; align-items: center; gap: 8px;">
                                                <input type="radio" name="outputFormat" value="html">
                                                <span>HTML</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <button class="btn btn-success" id="generateCustomReportBtn">
                                        <i class="fas fa-cog"></i> Generar Reporte Personalizado
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Configuración del Sistema</div>
                            <div class="card-actions">
                                <button class="btn btn-success" id="saveSettingsBtn">
                                    <i class="fas fa-save"></i> Guardar Configuración
                                </button>
                            </div>
                        </div>
                        
                        <div class="content-tabs">
                            <div class="content-tab active" data-setting="general">General</div>
                            <div class="content-tab" data-setting="recognition">Reconocimiento</div>
                            <div class="content-tab" data-setting="scouting">Scouting</div>
                            <div class="content-tab" data-setting="backup">Respaldo</div>
                        </div>
                        
                        <div class="settings-content">
                            <div class="setting-type active" data-type="general">
                                <div class="form-group">
                                    <label class="form-label" for="systemName">Nombre del sistema</label>
                                    <input type="text" id="systemName" class="form-control" value="Sistema de Scouting de Fútbol">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="language">Idioma</label>
                                    <select id="language" class="form-control">
                                        <option value="es">Español</option>
                                        <option value="en">English</option>
                                        <option value="fr">Français</option>
                                        <option value="de">Deutsch</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="timezone">Zona horaria</label>
                                    <select id="timezone" class="form-control">
                                        <option value="-6">UTC-6:00 (Centroamérica)</option>
                                        <option value="-5">UTC-5:00 (Perú, Colombia)</option>
                                        <option value="-4">UTC-4:00 (Chile, Bolivia)</option>
                                        <option value="-3">UTC-3:00 (Argentina, Brasil)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="maxPlayers">Máximo de jugadores</label>
                                    <input type="number" id="maxPlayers" class="form-control" value="5000" min="1" max="10000">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="autoLogout">Cierre de sesión automático (minutos)</label>
                                    <input type="number" id="autoLogout" class="form-control" value="30" min="1" max="480">
                                </div>
                            </div>
                            
                            <div class="setting-type" data-type="recognition">
                                <div class="form-group">
                                    <label class="form-label" for="recognitionAlgorithm">Algoritmo de reconocimiento</label>
                                    <select id="recognitionAlgorithm" class="form-control">
                                        <option value="eigenfaces">Eigenfaces</option>
                                        <option value="fisherfaces">Fisherfaces</option>
                                        <option value="lbph" selected>LBPH (Recomendado)</option>
                                        <option value="deep">Aprendizaje Profundo</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="minFaceSize">Tamaño mínimo de rostro (píxeles)</label>
                                    <input type="number" id="minFaceSize" class="form-control" value="100" min="50" max="500">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="confidenceThreshold">Umbral de confianza</label>
                                    <input type="range" id="confidenceThreshold" class="form-control" min="0.1" max="1.0" step="0.1" value="0.6">
                                    <div class="threshold-value">Valor actual: <span id="thresholdValue">0.6</span></div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Características a extraer</label>
                                    <div class="feature-options" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                        <label class="feature-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="features" value="eyes" checked>
                                            <span>Ojos</span>
                                        </label>
                                        <label class="feature-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="features" value="nose" checked>
                                            <span>Nariz</span>
                                        </label>
                                        <label class="feature-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="features" value="mouth" checked>
                                            <span>Boca</span>
                                        </label>
                                        <label class="feature-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="features" value="face_shape">
                                            <span>Forma del rostro</span>
                                        </label>
                                        <label class="feature-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="features" value="texture">
                                            <span>Textura de piel</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="maxFaces">Máximo de rostros a detectar</label>
                                    <input type="number" id="maxFaces" class="form-control" value="10" min="1" max="50">
                                </div>
                            </div>
                            
                            <div class="setting-type" data-type="scouting">
                                <div class="form-group">
                                    <label class="form-label" for="scoutingCriteria">Criterios de scouting</label>
                                    <select id="scoutingCriteria" class="form-control">
                                        <option value="basic">Básico</option>
                                        <option value="advanced" selected>Avanzado</option>
                                        <option value="professional">Profesional</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="minAgeScouting">Edad mínima para scouting</label>
                                    <input type="number" id="minAgeScouting" class="form-control" value="16" min="12" max="25">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="maxAgeScouting">Edad máxima para scouting</label>
                                    <input type="number" id="maxAgeScouting" class="form-control" value="35" min="20" max="45">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Habilidades a evaluar</label>
                                    <div class="permission-options" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                        <label class="permission-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="skills" value="technical" checked>
                                            <span>Habilidades técnicas</span>
                                        </label>
                                        <label class="permission-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="skills" value="tactical" checked>
                                            <span>Habilidades tácticas</span>
                                        </label>
                                        <label class="permission-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="skills" value="physical" checked>
                                            <span>Habilidades físicas</span>
                                        </label>
                                        <label class="permission-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="skills" value="mental">
                                            <span>Habilidades mentales</span>
                                        </label>
                                        <label class="permission-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="skills" value="potential">
                                            <span>Potencial de desarrollo</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="dataRetention">Retención de datos (días)</label>
                                    <input type="number" id="dataRetention" class="form-control" value="365" min="30" max="3650">
                                </div>
                            </div>
                            
                            <div class="setting-type" data-type="backup">
                                <div class="form-group">
                                    <label class="form-label" for="backupFrequency">Frecuencia de respaldo</label>
                                    <select id="backupFrequency" class="form-control">
                                        <option value="daily">Diario</option>
                                        <option value="weekly" selected>Semanal</option>
                                        <option value="monthly">Mensual</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="backupLocation">Ubicación de respaldo</label>
                                    <select id="backupLocation" class="form-control">
                                        <option value="local">Local</option>
                                        <option value="cloud" selected>Nube</option>
                                        <option value="both">Ambos</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="backupTime">Hora de respaldo automático</label>
                                    <input type="time" id="backupTime" class="form-control" value="02:00">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Tipos de datos a respaldar</label>
                                    <div class="backup-options" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                        <label class="backup-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="backupData" value="profiles" checked>
                                            <span>Perfiles de jugadores</span>
                                        </label>
                                        <label class="backup-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="backupData" value="images" checked>
                                            <span>Imágenes</span>
                                        </label>
                                        <label class="backup-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="backupData" value="logs" checked>
                                            <span>Registros del sistema</span>
                                        </label>
                                        <label class="backup-option" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" name="backupData" value="settings">
                                            <span>Configuración</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="backup-actions" style="display: flex; gap: 10px;">
                                    <button class="btn btn-info" id="backupNowBtn">
                                        <i class="fas fa-download"></i> Respaldar Ahora
                                    </button>
                                    <button class="btn btn-warning" id="restoreBackupBtn">
                                        <i class="fas fa-upload"></i> Restaurar Respaldo
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notificationContainer"></div>
    
    <!-- Modals will be added here -->
    
    <script>
        // Sistema de Registro de Jugadores de Fútbol - Versión Completa con Cámara Responsiva
        class FootballScoutingSystem {
            constructor() {
                this.players = JSON.parse(localStorage.getItem('footballScoutingPlayers')) || [];
                this.settings = JSON.parse(localStorage.getItem('footballScoutingSettings')) || this.getDefaultSettings();
                this.activityLog = JSON.parse(localStorage.getItem('footballScoutingActivity')) || [];
                this.cameraStream = null;
                this.cameraCaptures = [];
                this.isIdentifying = false;
                this.faceDetectionInterval = null;
                this.fpsCounter = 0;
                this.lastFpsTime = 0;
                this.availableCameras = [];
                this.currentCameraIndex = 0;
                this.currentEffect = 'normal';
                this.isMobile = this.detectMobile();
                
                this.init();
            }
            
            init() {
                this.loadSettings();
                this.setupEventListeners();
                this.updateDashboard();
                this.refreshPlayersList();
                this.initializeCharts();
                this.detectDeviceType();
                this.logActivity('Sistema de scouting iniciado', 'info');
            }
            
            getDefaultSettings() {
                return {
                    systemName: 'Sistema de Scouting de Fútbol',
                    language: 'es',
                    timezone: '-6',
                    maxPlayers: 5000,
                    autoLogout: 30,
                    recognitionAlgorithm: 'lbph',
                    minFaceSize: 100,
                    confidenceThreshold: 0.6,
                    features: ['eyes', 'nose', 'mouth'],
                    maxFaces: 10,
                    scoutingCriteria: 'advanced',
                    minAgeScouting: 16,
                    maxAgeScouting: 35,
                    skills: ['technical', 'tactical', 'physical'],
                    dataRetention: 365,
                    backupFrequency: 'weekly',
                    backupLocation: 'cloud',
                    backupTime: '02:00',
                    backupData: ['profiles', 'images', 'logs']
                };
            }
            
            detectMobile() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }
            
            detectDeviceType() {
                const deviceTypeElement = document.getElementById('deviceType');
                if (this.isMobile) {
                    deviceTypeElement.textContent = 'Móvil';
                    document.body.classList.add('mobile-device');
                } else {
                    deviceTypeElement.textContent = 'Escritorio';
                    document.body.classList.add('desktop-device');
                }
            }
            
            setupEventListeners() {
                // Navegación
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tabId = link.getAttribute('data-tab');
                        this.switchTab(tabId);
                    });
                });
                
                // Formulario de registro
                document.getElementById('registerForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.registerPlayer();
                });
                
                // Sliders de habilidades
                this.setupSkillSliders();
                
                // Botones de imágenes
                document.getElementById('addImagesBtn').addEventListener('click', () => {
                    document.getElementById('imageUpload').click();
                });
                
                document.getElementById('imageUpload').addEventListener('change', (e) => {
                    this.handleImageUpload(e.target.files, 'register');
                });
                
                document.getElementById('clearImagesBtn').addEventListener('click', () => {
                    this.clearImages('register');
                });
                
                document.getElementById('resetFormBtn').addEventListener('click', () => {
                    this.resetRegisterForm();
                });
                
                // Cámara - Controles de escritorio
                document.getElementById('startCameraBtn').addEventListener('click', () => {
                    this.startCamera();
                });
                
                document.getElementById('stopCameraBtn').addEventListener('click', () => {
                    this.stopCamera();
                });
                
                document.getElementById('capturePhotoBtn').addEventListener('click', () => {
                    this.capturePhoto();
                });
                
                document.getElementById('identifyBtn').addEventListener('click', () => {
                    this.toggleRealTimeIdentification();
                });
                
                document.getElementById('switchCameraBtn').addEventListener('click', () => {
                    this.switchCamera();
                });
                
                document.getElementById('registerFromCameraBtn').addEventListener('click', () => {
                    this.registerFromCamera();
                });
                
                // Cámara - Controles móviles
                document.getElementById('mobileStartBtn').addEventListener('click', () => {
                    this.startCamera();
                });
                
                document.getElementById('mobileStopBtn').addEventListener('click', () => {
                    this.stopCamera();
                });
                
                document.getElementById('mobileCaptureBtn').addEventListener('click', () => {
                    this.capturePhoto();
                });
                
                document.getElementById('mobileSwitchBtn').addEventListener('click', () => {
                    this.switchCamera();
                });
                
                // Selector de cámara
                document.getElementById('cameraSelect').addEventListener('change', (e) => {
                    this.selectCamera(e.target.value);
                });
                
                // Efectos de cámara
                document.querySelectorAll('.effect-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const effect = e.target.getAttribute('data-effect');
                        this.applyCameraEffect(effect);
                    });
                });
                
                // Búsqueda
                document.getElementById('searchBtn').addEventListener('click', () => {
                    this.performSearch();
                });
                
                // Gestión
                document.getElementById('refreshListBtn').addEventListener('click', () => {
                    this.refreshPlayersList();
                });
                
                // Configuración
                document.getElementById('saveSettingsBtn').addEventListener('click', () => {
                    this.saveSettings();
                });
                
                // Detectar cambios de orientación
                window.addEventListener('orientationchange', () => {
                    this.handleOrientationChange();
                });
                
                // Pestañas de contenido
                this.setupContentTabs();
            }
            
            setupSkillSliders() {
                const skills = ['dribbling', 'shooting', 'passing', 'defense', 'physical'];
                skills.forEach(skill => {
                    const slider = document.getElementById(skill);
                    const valueDisplay = document.getElementById(skill + 'Value');
                    
                    slider.addEventListener('input', (e) => {
                        valueDisplay.textContent = e.target.value;
                    });
                });
            }
            
            setupContentTabs() {
                // Pestañas de búsqueda
                document.querySelectorAll('[data-search-type]').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const searchType = tab.getAttribute('data-search-type');
                        this.switchSearchType(searchType);
                    });
                });
                
                // Pestañas de reportes
                document.querySelectorAll('[data-report]').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const reportType = tab.getAttribute('data-report');
                        this.switchReportType(reportType);
                    });
                });
                
                // Pestañas de configuración
                document.querySelectorAll('[data-setting]').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const settingType = tab.getAttribute('data-setting');
                        this.switchSettingType(settingType);
                    });
                });
            }
            
            switchTab(tabId) {
                // Ocultar todas las pestañas
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Desactivar todos los enlaces
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // Activar pestaña seleccionada
                document.getElementById(tabId).classList.add('active');
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
                
                // Actualizar título del header
                const tabTitles = {
                    dashboard: 'Dashboard Principal',
                    register: 'Registrar Jugador',
                    camera: 'Cámara en Vivo',
                    search: 'Buscar Jugador',
                    manage: 'Gestionar Jugadores',
                    reports: 'Reportes y Estadísticas',
                    settings: 'Configuración del Sistema'
                };
                
                document.querySelector('.header-title').textContent = tabTitles[tabId] || 'Sistema de Scouting de Fútbol';
                
                // Detener cámara si no estamos en la pestaña de cámara
                if (tabId !== 'camera') {
                    this.stopCamera();
                }
                
                this.logActivity(`Cambió a pestaña: ${tabTitles[tabId]}`, 'info');
            }
            
            // REGISTRO DE JUGADORES
            registerPlayer() {
                const name = document.getElementById('playerName').value.trim();
                
                if (!name) {
                    this.showNotification('El nombre es obligatorio', 'error');
                    return;
                }
                
                const images = Array.from(document.querySelectorAll('#imagePreview .preview-image'))
                    .map(img => img.querySelector('img').src);
                
                if (images.length === 0) {
                    this.showNotification('Se requiere al menos una imagen', 'error');
                    return;
                }
                
                const player = {
                    id: this.generateId(),
                    name: name,
                    number: parseInt(document.getElementById('playerNumber').value) || 0,
                    age: parseInt(document.getElementById('playerAge').value) || 0,
                    nationality: document.getElementById('playerNationality').value,
                    position: document.getElementById('playerPosition').value,
                    team: document.getElementById('playerTeam').value,
                    skills: {
                        dribbling: parseInt(document.getElementById('dribbling').value),
                        shooting: parseInt(document.getElementById('shooting').value),
                        passing: parseInt(document.getElementById('passing').value),
                        defense: parseInt(document.getElementById('defense').value),
                        physical: parseInt(document.getElementById('physical').value)
                    },
                    marketValue: parseInt(document.getElementById('playerValue').value) || 0,
                    tags: document.getElementById('playerTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                    notes: document.getElementById('playerNotes').value,
                    images: images,
                    prospectLevel: document.querySelector('input[name="prospectLevel"]:checked').value,
                    createdDate: new Date().toISOString(),
                    status: 'active',
                    biometricHash: this.generateBiometricHash()
                };
                
                this.players.push(player);
                this.saveData();
                
                this.showNotification(`Jugador "${player.name}" registrado correctamente`, 'success');
                this.resetRegisterForm();
                this.updateDashboard();
                this.refreshPlayersList();
                this.logActivity(`Registró nuevo jugador: ${player.name}`, 'success');
            }
            
            resetRegisterForm() {
                document.getElementById('registerForm').reset();
                this.clearImages('register');
                
                // Resetear sliders de habilidades
                const skills = ['dribbling', 'shooting', 'passing', 'defense', 'physical'];
                skills.forEach(skill => {
                    document.getElementById(skill).value = 5;
                    document.getElementById(skill + 'Value').textContent = '5';
                });
            }
            
            handleImageUpload(files, context) {
                Array.from(files).forEach(file => {
                    if (!file.type.startsWith('image/')) {
                        this.showNotification(`El archivo ${file.name} no es una imagen válida`, 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.addImagePreview(e.target.result, context);
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            addImagePreview(imageData, context) {
                const previewContainer = context === 'register' ? 
                    document.getElementById('imagePreview') : 
                    document.getElementById('cameraCapturesPreview');
                
                const imageDiv = document.createElement('div');
                imageDiv.className = 'preview-image';
                imageDiv.innerHTML = `
                    <img src="${imageData}" alt="Vista previa">
                    <button class="remove-image" type="button">&times;</button>
                `;
                
                imageDiv.querySelector('.remove-image').addEventListener('click', () => {
                    imageDiv.remove();
                    if (context === 'camera') {
                        this.updateCapturesCount();
                    }
                });
                
                previewContainer.appendChild(imageDiv);
                
                if (context === 'camera') {
                    this.cameraCaptures.push(imageData);
                    this.updateCapturesCount();
                }
            }
            
            clearImages(context) {
                const previewContainer = context === 'register' ? 
                    document.getElementById('imagePreview') : 
                    document.getElementById('cameraCapturesPreview');
                
                previewContainer.innerHTML = '';
                
                if (context === 'camera') {
                    this.cameraCaptures = [];
                    this.updateCapturesCount();
                }
            }
            
            updateCapturesCount() {
                document.getElementById('capturesCount').textContent = this.cameraCaptures.length;
            }
            
            // CÁMARA Y RECONOCIMIENTO - FUNCIONES MEJORADAS
            async startCamera() {
                try {
                    // Detectar cámaras disponibles
                    await this.detectCameras();
                    
                    const constraints = {
                        video: {
                            width: { ideal: 1280 },
                            height: { ideal: 720 },
                            facingMode: this.isMobile ? 'environment' : 'user',
                            deviceId: this.availableCameras[this.currentCameraIndex] ? 
                                { exact: this.availableCameras[this.currentCameraIndex].deviceId } : undefined
                        }
                    };
                    
                    this.cameraStream = await navigator.mediaDevices.getUserMedia(constraints);
                    
                    const video = document.getElementById('cameraFeed');
                    video.srcObject = this.cameraStream;
                    
                    // Aplicar efecto actual
                    this.applyCameraEffect(this.currentEffect);
                    
                    document.getElementById('cameraStatus').textContent = 'Activa';
                    this.showNotification('Cámara iniciada correctamente', 'success');
                    this.logActivity('Inició cámara', 'info');
                    
                    // Iniciar contador de FPS
                    this.startFpsCounter();
                    
                    // Mostrar indicador de cámara activa
                    document.querySelector('.camera-active-indicator').style.display = 'flex';
                    
                } catch (error) {
                    console.error('Error al acceder a la cámara:', error);
                    this.showNotification('No se pudo acceder a la cámara', 'error');
                    
                    // Intentar con restricciones más permisivas
                    try {
                        this.cameraStream = await navigator.mediaDevices.getUserMedia({ video: true });
                        const video = document.getElementById('cameraFeed');
                        video.srcObject = this.cameraStream;
                        
                        document.getElementById('cameraStatus').textContent = 'Activa';
                        this.showNotification('Cámara iniciada con configuración básica', 'warning');
                        this.logActivity('Inició cámara con configuración básica', 'info');
                        
                        this.startFpsCounter();
                        document.querySelector('.camera-active-indicator').style.display = 'flex';
                    } catch (fallbackError) {
                        console.error('Error incluso con configuración básica:', fallbackError);
                        this.showNotification('No se pudo acceder a ninguna cámara', 'error');
                    }
                }
            }
            
            async detectCameras() {
                try {
                    const devices = await navigator.mediaDevices.enumerateDevices();
                    this.availableCameras = devices.filter(device => device.kind === 'videoinput');
                    
                    // Actualizar selector de cámara
                    const cameraSelect = document.getElementById('cameraSelect');
                    cameraSelect.innerHTML = '<option value="">Seleccionar cámara...</option>';
                    
                    this.availableCameras.forEach((camera, index) => {
                        const option = document.createElement('option');
                        option.value = camera.deviceId;
                        option.textContent = camera.label || `Cámara ${index + 1}`;
                        cameraSelect.appendChild(option);
                    });
                    
                    // Seleccionar la cámara actual
                    if (this.availableCameras.length > 0) {
                        cameraSelect.value = this.availableCameras[this.currentCameraIndex].deviceId;
                    }
                    
                } catch (error) {
                    console.error('Error al detectar cámaras:', error);
                }
            }
            
            async switchCamera() {
                if (this.availableCameras.length < 2) {
                    this.showNotification('Solo hay una cámara disponible', 'info');
                    return;
                }
                
                // Detener cámara actual
                this.stopCamera();
                
                // Cambiar a la siguiente cámara
                this.currentCameraIndex = (this.currentCameraIndex + 1) % this.availableCameras.length;
                
                // Iniciar con la nueva cámara
                setTimeout(() => {
                    this.startCamera();
                }, 500);
                
                this.showNotification(`Cambiando a ${this.availableCameras[this.currentCameraIndex].label || 'cámara'}`, 'info');
            }
            
            async selectCamera(deviceId) {
                if (!deviceId) return;
                
                // Encontrar el índice de la cámara seleccionada
                const cameraIndex = this.availableCameras.findIndex(camera => camera.deviceId === deviceId);
                if (cameraIndex === -1) return;
                
                // Detener cámara actual
                this.stopCamera();
                
                // Cambiar a la cámara seleccionada
                this.currentCameraIndex = cameraIndex;
                
                // Iniciar con la nueva cámara
                setTimeout(() => {
                    this.startCamera();
                }, 500);
            }
            
            applyCameraEffect(effect) {
                this.currentEffect = effect;
                
                // Actualizar botones de efecto
                document.querySelectorAll('.effect-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-effect="${effect}"]`).classList.add('active');
                
                const video = document.getElementById('cameraFeed');
                
                // Aplicar filtro CSS según el efecto
                switch(effect) {
                    case 'normal':
                        video.style.filter = 'none';
                        break;
                    case 'grayscale':
                        video.style.filter = 'grayscale(100%)';
                        break;
                    case 'sepia':
                        video.style.filter = 'sepia(100%)';
                        break;
                    case 'invert':
                        video.style.filter = 'invert(100%)';
                        break;
                }
            }
            
            handleOrientationChange() {
                // Reajustar la cámara cuando cambia la orientación
                if (this.cameraStream) {
                    setTimeout(() => {
                        this.stopCamera();
                        setTimeout(() => {
                            this.startCamera();
                        }, 500);
                    }, 100);
                }
            }
            
            stopCamera() {
                if (this.cameraStream) {
                    this.cameraStream.getTracks().forEach(track => track.stop());
                    this.cameraStream = null;
                    
                    const video = document.getElementById('cameraFeed');
                    video.srcObject = null;
                    
                    document.getElementById('cameraStatus').textContent = 'Inactiva';
                    document.getElementById('facesDetected').textContent = '0';
                    document.getElementById('cameraFPS').textContent = '0';
                    
                    this.isIdentifying = false;
                    if (this.faceDetectionInterval) {
                        clearInterval(this.faceDetectionInterval);
                        this.faceDetectionInterval = null;
                    }
                    
                    // Limpiar overlay
                    document.getElementById('cameraOverlay').innerHTML = '';
                    
                    // Ocultar indicador de cámara activa
                    document.querySelector('.camera-active-indicator').style.display = 'none';
                    
                    this.showNotification('Cámara detenida', 'info');
                    this.logActivity('Detuvo cámara', 'info');
                }
            }
            
            capturePhoto() {
                if (!this.cameraStream) {
                    this.showNotification('La cámara no está activa', 'error');
                    return;
                }
                
                const video = document.getElementById('cameraFeed');
                const canvas = document.createElement('canvas');
                
                // Ajustar dimensiones según la orientación
                if (this.isMobile && window.innerHeight > window.innerWidth) {
                    // Modo vertical
                    canvas.width = video.videoHeight;
                    canvas.height = video.videoWidth;
                } else {
                    // Modo horizontal o escritorio
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                }
                
                const ctx = canvas.getContext('2d');
                
                // Rotar la imagen si es necesario para móviles
                if (this.isMobile && window.innerHeight > window.innerWidth) {
                    ctx.translate(canvas.width / 2, canvas.height / 2);
                    ctx.rotate(Math.PI / 2);
                    ctx.drawImage(video, -video.videoWidth / 2, -video.videoHeight / 2, video.videoWidth, video.videoHeight);
                } else {
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                }
                
                const imageData = canvas.toDataURL('image/jpeg', 0.8);
                this.addImagePreview(imageData, 'camera');
                
                this.showNotification('Foto capturada correctamente', 'success');
                this.logActivity('Capturó foto desde cámara', 'info');
                
                // Efecto visual de captura (flash)
                this.captureFlashEffect();
            }
            
            captureFlashEffect() {
                const overlay = document.getElementById('cameraOverlay');
                const flash = document.createElement('div');
                flash.style.position = 'absolute';
                flash.style.top = '0';
                flash.style.left = '0';
                flash.style.width = '100%';
                flash.style.height = '100%';
                flash.style.backgroundColor = 'white';
                flash.style.opacity = '0.8';
                flash.style.zIndex = '5';
                flash.style.pointerEvents = 'none';
                
                overlay.appendChild(flash);
                
                // Animación de desvanecimiento
                let opacity = 0.8;
                const fadeOut = setInterval(() => {
                    opacity -= 0.1;
                    flash.style.opacity = opacity;
                    
                    if (opacity <= 0) {
                        clearInterval(fadeOut);
                        flash.remove();
                    }
                }, 30);
            }
            
            toggleRealTimeIdentification() {
                this.isIdentifying = !this.isIdentifying;
                
                if (this.isIdentifying) {
                    this.startFaceDetection();
                    document.getElementById('identifyBtn').innerHTML = '<i class="fas fa-stop"></i> Detener Identificación';
                    this.showNotification('Identificación en tiempo real activada', 'info');
                    this.logActivity('Activó identificación en tiempo real', 'info');
                } else {
                    this.stopFaceDetection();
                    document.getElementById('identifyBtn').innerHTML = '<i class="fas fa-search"></i> Identificar en Tiempo Real';
                    this.showNotification('Identificación en tiempo real desactivada', 'info');
                    this.logActivity('Desactivó identificación en tiempo real', 'info');
                }
            }
            
            startFaceDetection() {
                // Simulación de detección facial
                this.faceDetectionInterval = setInterval(() => {
                    if (!this.cameraStream) return;
                    
                    // Simular detección de caras (1-3 caras aleatorias)
                    const faceCount = Math.floor(Math.random() * 3) + 1;
                    document.getElementById('facesDetected').textContent = faceCount;
                    
                    // Actualizar overlay con marcos de detección
                    this.updateFaceOverlay(faceCount);
                    
                }, 1000);
            }
            
            stopFaceDetection() {
                if (this.faceDetectionInterval) {
                    clearInterval(this.faceDetectionInterval);
                    this.faceDetectionInterval = null;
                }
                
                document.getElementById('facesDetected').textContent = '0';
                document.getElementById('cameraOverlay').innerHTML = '';
            }
            
            updateFaceOverlay(faceCount) {
                const overlay = document.getElementById('cameraOverlay');
                overlay.innerHTML = '';
                
                for (let i = 0; i < faceCount; i++) {
                    const faceFrame = document.createElement('div');
                    faceFrame.className = 'face-frame';
                    
                    // Posiciones aleatorias para simulación
                    const left = 10 + Math.random() * 70;
                    const top = 10 + Math.random() * 70;
                    const width = 15 + Math.random() * 25;
                    const height = width * 1.2;
                    
                    faceFrame.style.left = `${left}%`;
                    faceFrame.style.top = `${top}%`;
                    faceFrame.style.width = `${width}%`;
                    faceFrame.style.height = `${height}%`;
                    
                    overlay.appendChild(faceFrame);
                }
            }
            
            startFpsCounter() {
                this.lastFpsTime = performance.now();
                this.fpsCounter = 0;
                
                const updateFps = () => {
                    if (!this.cameraStream) return;
                    
                    this.fpsCounter++;
                    const currentTime = performance.now();
                    
                    if (currentTime - this.lastFpsTime >= 1000) {
                        document.getElementById('cameraFPS').textContent = this.fpsCounter;
                        this.fpsCounter = 0;
                        this.lastFpsTime = currentTime;
                    }
                    
                    requestAnimationFrame(updateFps);
                };
                
                updateFps();
            }
            
            registerFromCamera() {
                const name = document.getElementById('cameraPlayerName').value.trim();
                
                if (!name) {
                    this.showNotification('Ingrese un nombre para el jugador', 'error');
                    return;
                }
                
                if (this.cameraCaptures.length === 0) {
                    this.showNotification('Capture al menos una foto con la cámara', 'error');
                    return;
                }
                
                const player = {
                    id: this.generateId(),
                    name: name,
                    images: this.cameraCaptures,
                    createdDate: new Date().toISOString(),
                    status: 'active',
                    biometricHash: this.generateBiometricHash(),
                    registeredFrom: 'camera'
                };
                
                this.players.push(player);
                this.saveData();
                
                // Limpiar formulario
                document.getElementById('cameraPlayerName').value = '';
                this.clearImages('camera');
                
                this.showNotification(`Jugador "${player.name}" registrado desde cámara`, 'success');
                this.updateDashboard();
                this.refreshPlayersList();
                this.logActivity(`Registró jugador desde cámara: ${player.name}`, 'success');
            }
            
            // BÚSQUEDA
            performSearch() {
                const searchType = document.querySelector('.content-tab.active').getAttribute('data-search-type');
                
                let results = [];
                
                switch (searchType) {
                    case 'image':
                        results = this.searchByImage();
                        break;
                    case 'camera':
                        results = this.searchByCamera();
                        break;
                    case 'filters':
                        results = this.searchByFilters();
                        break;
                }
                
                this.displaySearchResults(results);
                this.logActivity(`Realizó búsqueda (${searchType})`, 'info');
            }
            
            searchByImage() {
                // Simulación de búsqueda por imagen
                const maxResults = parseInt(document.getElementById('maxResults').value);
                const minConfidence = parseFloat(document.getElementById('minConfidence').value);
                
                // Simular resultados
                return this.players
                    .filter(player => Math.random() > 0.3) // 70% de probabilidad de coincidencia
                    .slice(0, maxResults)
                    .map(player => ({
                        player: player,
                        similarity: (Math.random() * 0.4 + 0.6).toFixed(3), // 0.6 - 1.0
                        confidence: (Math.random() * 0.3 + 0.7).toFixed(3), // 0.7 - 1.0
                        algorithm: document.getElementById('searchAlgorithm').value
                    }));
            }
            
            searchByCamera() {
                // Similar a searchByImage pero usando la cámara actual
                return this.searchByImage();
            }
            
            searchByFilters() {
                const name = document.getElementById('searchName').value.toLowerCase();
                const position = document.getElementById('searchPosition').value;
                const ageFrom = parseInt(document.getElementById('searchAgeFrom').value) || 16;
                const ageTo = parseInt(document.getElementById('searchAgeTo').value) || 45;
                const team = document.getElementById('searchTeam').value.toLowerCase();
                const tags = document.getElementById('searchTags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
                
                return this.players.filter(player => {
                    // Filtro por nombre
                    if (name && !player.name.toLowerCase().includes(name)) {
                        return false;
                    }
                    
                    // Filtro por posición
                    if (position && player.position !== position) {
                        return false;
                    }
                    
                    // Filtro por edad
                    if (player.age < ageFrom || player.age > ageTo) {
                        return false;
                    }
                    
                    // Filtro por equipo
                    if (team && !player.team.toLowerCase().includes(team)) {
                        return false;
                    }
                    
                    // Filtro por etiquetas
                    if (tags.length > 0 && !tags.some(tag => player.tags.includes(tag))) {
                        return false;
                    }
                    
                    return true;
                }).map(player => ({
                    player: player,
                    similarity: '1.000', // Coincidencia exacta en búsqueda por filtros
                    confidence: '1.000',
                    algorithm: 'filter_match'
                }));
            }
            
            displaySearchResults(results) {
                const container = document.getElementById('searchResults');
                
                if (results.length === 0) {
                    container.innerHTML = `
                        <div class="no-results">
                            <i class="fas fa-search"></i>
                            <p>No se encontraron resultados para la búsqueda</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = '';
                
                results.forEach(result => {
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    
                    const positionClass = this.getPositionClass(result.player.position);
                    
                    card.innerHTML = `
                        <div class="result-header">
                            <div class="result-name">${result.player.name}</div>
                            <div class="result-confidence">${(result.confidence * 100).toFixed(1)}%</div>
                        </div>
                        <div class="result-details">
                            <p><strong>Similitud:</strong> ${(result.similarity * 100).toFixed(1)}%</p>
                            <p><strong>Edad:</strong> ${result.player.age || 'N/A'}</p>
                            <p><strong>Posición:</strong> <span class="player-position ${positionClass}">${result.player.position || 'N/A'}</span></p>
                            <p><strong>Equipo:</strong> ${result.player.team || 'N/A'}</p>
                            <p><strong>Algoritmo:</strong> ${result.algorithm}</p>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
            }
            
            getPositionClass(position) {
                switch(position) {
                    case 'Portero': return 'position-portero';
                    case 'Defensa': return 'position-defensa';
                    case 'Mediocampista': return 'position-medio';
                    case 'Delantero': return 'position-delantero';
                    default: return '';
                }
            }
            
            switchSearchType(type) {
                // Desactivar todas las pestañas
                document.querySelectorAll('.content-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.querySelectorAll('.search-type').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Activar pestaña seleccionada
                document.querySelector(`[data-search-type="${type}"]`).classList.add('active');
                document.querySelector(`.search-type[data-type="${type}"]`).classList.add('active');
            }
            
            // GESTIÓN
            refreshPlayersList() {
                const tableBody = document.querySelector('#playersTable tbody');
                tableBody.innerHTML = '';
                
                if (this.players.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="11" style="text-align: center; padding: 20px;">
                                No hay jugadores registrados
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                this.players.forEach(player => {
                    const row = document.createElement('tr');
                    const positionClass = this.getPositionClass(player.position);
                    
                    row.innerHTML = `
                        <td><input type="checkbox" class="player-checkbox" value="${player.id}"></td>
                        <td>${player.id.substring(0, 8)}...</td>
                        <td>${player.name}</td>
                        <td>${player.age || 'N/A'}</td>
                        <td><span class="player-position ${positionClass}">${player.position || 'N/A'}</span></td>
                        <td>${player.team || 'N/A'}</td>
                        <td>${player.number || 'N/A'}</td>
                        <td>${player.marketValue ? '€' + player.marketValue.toLocaleString() : 'N/A'}</td>
                        <td><span class="badge badge-success">${player.status}</span></td>
                        <td>${new Date(player.createdDate).toLocaleDateString()}</td>
                        <td>
                            <button class="btn btn-sm btn-info view-player" data-id="${player.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-warning edit-player" data-id="${player.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger delete-player" data-id="${player.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Actualizar contadores
                document.getElementById('showingCount').textContent = this.players.length;
                document.getElementById('totalCount').textContent = this.players.length;
                
                // Agregar event listeners a los botones
                this.setupPlayerActions();
            }
            
            setupPlayerActions() {
                document.querySelectorAll('.view-player').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const playerId = btn.getAttribute('data-id');
                        this.viewPlayer(playerId);
                    });
                });
                
                document.querySelectorAll('.edit-player').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const playerId = btn.getAttribute('data-id');
                        this.editPlayer(playerId);
                    });
                });
                
                document.querySelectorAll('.delete-player').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const playerId = btn.getAttribute('data-id');
                        this.deletePlayer(playerId);
                    });
                });
            }
            
            viewPlayer(playerId) {
                const player = this.players.find(p => p.id === playerId);
                if (!player) return;
                
                let skillsInfo = '';
                if (player.skills) {
                    skillsInfo = `
Habilidades:
- Regate: ${player.skills.dribbling || 0}/10
- Tiro: ${player.skills.shooting || 0}/10
- Pase: ${player.skills.passing || 0}/10
- Defensa: ${player.skills.defense || 0}/10
- Físico: ${player.skills.physical || 0}/10
                    `;
                }
                
                alert(`
Detalles de ${player.name}:
------------------------
ID: ${player.id}
Nombre: ${player.name}
Número: ${player.number || 'N/A'}
Edad: ${player.age || 'N/A'}
Nacionalidad: ${player.nationality || 'N/A'}
Posición: ${player.position || 'N/A'}
Equipo: ${player.team || 'N/A'}
Valor de mercado: ${player.marketValue ? '€' + player.marketValue.toLocaleString() : 'N/A'}
Nivel de prospecto: ${player.prospectLevel}
Etiquetas: ${player.tags.join(', ') || 'Ninguna'}
Fecha de registro: ${new Date(player.createdDate).toLocaleString()}
Imágenes: ${player.images.length}
Estado: ${player.status}

${skillsInfo}

Observaciones:
${player.notes || 'Ninguna'}
                `);
                
                this.logActivity(`Vio detalles de: ${player.name}`, 'info');
            }
            
            editPlayer(playerId) {
                const player = this.players.find(p => p.id === playerId);
                if (!player) return;
                
                // En una implementación real, aquí se abriría un modal de edición
                const newName = prompt('Nuevo nombre:', player.name);
                if (newName === null) return;
                
                player.name = newName;
                this.saveData();
                this.refreshPlayersList();
                this.showNotification('Jugador actualizado correctamente', 'success');
                this.logActivity(`Editó jugador: ${player.name}`, 'info');
            }
            
            deletePlayer(playerId) {
                const player = this.players.find(p => p.id === playerId);
                if (!player) return;
                
                if (confirm(`¿Está seguro de que desea eliminar a "${player.name}"?`)) {
                    this.players = this.players.filter(p => p.id !== playerId);
                    this.saveData();
                    this.refreshPlayersList();
                    this.updateDashboard();
                    this.showNotification('Jugador eliminado correctamente', 'success');
                    this.logActivity(`Eliminó jugador: ${player.name}`, 'warning');
                }
            }
            
            // REPORTES
            switchReportType(type) {
                document.querySelectorAll('.content-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.querySelectorAll('.report-type').forEach(content => {
                    content.classList.remove('active');
                });
                
                document.querySelector(`[data-report="${type}"]`).classList.add('active');
                document.querySelector(`.report-type[data-type="${type}"]`).classList.add('active');
                
                if (type === 'summary') {
                    this.updateReportSummary();
                }
            }
            
            updateReportSummary() {
                document.getElementById('reportTotalPlayers').textContent = this.players.length;
                document.getElementById('reportTotalImages').textContent = this.players.reduce((sum, player) => sum + player.images.length, 0);
                document.getElementById('reportTotalSearches').textContent = this.activityLog.filter(log => log.action.includes('búsqueda')).length;
                document.getElementById('reportScoutingRate').textContent = '94.2%';
            }
            
            // CONFIGURACIÓN
            switchSettingType(type) {
                document.querySelectorAll('.content-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.querySelectorAll('.setting-type').forEach(content => {
                    content.classList.remove('active');
                });
                
                document.querySelector(`[data-setting="${type}"]`).classList.add('active');
                document.querySelector(`.setting-type[data-type="${type}"]`).classList.add('active');
            }
            
            loadSettings() {
                // Cargar configuración en los formularios
                document.getElementById('systemName').value = this.settings.systemName;
                document.getElementById('language').value = this.settings.language;
                document.getElementById('timezone').value = this.settings.timezone;
                document.getElementById('maxPlayers').value = this.settings.maxPlayers;
                document.getElementById('autoLogout').value = this.settings.autoLogout;
                document.getElementById('recognitionAlgorithm').value = this.settings.recognitionAlgorithm;
                document.getElementById('minFaceSize').value = this.settings.minFaceSize;
                document.getElementById('confidenceThreshold').value = this.settings.confidenceThreshold;
                document.getElementById('thresholdValue').textContent = this.settings.confidenceThreshold;
                document.getElementById('maxFaces').value = this.settings.maxFaces;
                document.getElementById('scoutingCriteria').value = this.settings.scoutingCriteria;
                document.getElementById('minAgeScouting').value = this.settings.minAgeScouting;
                document.getElementById('maxAgeScouting').value = this.settings.maxAgeScouting;
                document.getElementById('dataRetention').value = this.settings.dataRetention;
                document.getElementById('backupFrequency').value = this.settings.backupFrequency;
                document.getElementById('backupLocation').value = this.settings.backupLocation;
                document.getElementById('backupTime').value = this.settings.backupTime;
                
                // Actualizar valor del umbral de confianza en tiempo real
                document.getElementById('confidenceThreshold').addEventListener('input', (e) => {
                    document.getElementById('thresholdValue').textContent = e.target.value;
                });
            }
            
            saveSettings() {
                // Recopilar configuración de los formularios
                this.settings.systemName = document.getElementById('systemName').value;
                this.settings.language = document.getElementById('language').value;
                this.settings.timezone = document.getElementById('timezone').value;
                this.settings.maxPlayers = parseInt(document.getElementById('maxPlayers').value);
                this.settings.autoLogout = parseInt(document.getElementById('autoLogout').value);
                this.settings.recognitionAlgorithm = document.getElementById('recognitionAlgorithm').value;
                this.settings.minFaceSize = parseInt(document.getElementById('minFaceSize').value);
                this.settings.confidenceThreshold = parseFloat(document.getElementById('confidenceThreshold').value);
                this.settings.maxFaces = parseInt(document.getElementById('maxFaces').value);
                this.settings.scoutingCriteria = document.getElementById('scoutingCriteria').value;
                this.settings.minAgeScouting = parseInt(document.getElementById('minAgeScouting').value);
                this.settings.maxAgeScouting = parseInt(document.getElementById('maxAgeScouting').value);
                this.settings.dataRetention = parseInt(document.getElementById('dataRetention').value);
                this.settings.backupFrequency = document.getElementById('backupFrequency').value;
                this.settings.backupLocation = document.getElementById('backupLocation').value;
                this.settings.backupTime = document.getElementById('backupTime').value;
                
                // Guardar en localStorage
                localStorage.setItem('footballScoutingSettings', JSON.stringify(this.settings));
                
                this.showNotification('Configuración guardada correctamente', 'success');
                this.logActivity('Actualizó configuración del sistema', 'info');
            }
            
            // DASHBOARD Y ESTADÍSTICAS
            updateDashboard() {
                document.getElementById('totalPlayers').textContent = this.players.length;
                document.getElementById('totalImages').textContent = this.players.reduce((sum, player) => sum + player.images.length, 0);
                document.getElementById('totalSearches').textContent = this.activityLog.filter(log => log.action.includes('búsqueda')).length;
                document.getElementById('scoutingRate').textContent = '94.2%';
                
                this.updateActivityTable();
            }
            
            updateActivityTable() {
                const tableBody = document.getElementById('activityTable');
                tableBody.innerHTML = '';
                
                const recentActivities = this.activityLog.slice(-5).reverse();
                
                recentActivities.forEach(activity => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${new Date(activity.timestamp).toLocaleString()}</td>
                        <td>Scout</td>
                        <td>${activity.action}</td>
                        <td>${activity.details || ''}</td>
                        <td><span class="badge badge-${activity.type === 'error' ? 'danger' : activity.type === 'success' ? 'success' : 'info'}">${activity.type}</span></td>
                    `;
                    tableBody.appendChild(row);
                });
            }
            
            initializeCharts() {
                // Gráfico de rendimiento
                const performanceCtx = document.getElementById('performanceChart').getContext('2d');
                new Chart(performanceCtx, {
                    type: 'line',
                    data: {
                        labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
                        datasets: [{
                            label: 'Tasa de Scouting (%)',
                            data: [92, 94, 93, 95, 94, 96, 95],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 90,
                                max: 100
                            }
                        }
                    }
                });
                
                // Gráfico de posiciones
                const positionCtx = document.getElementById('positionChart').getContext('2d');
                
                // Calcular distribución por posición
                const positions = {};
                this.players.forEach(player => {
                    const pos = player.position || 'Sin posición';
                    positions[pos] = (positions[pos] || 0) + 1;
                });
                
                new Chart(positionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(positions),
                        datasets: [{
                            data: Object.values(positions),
                            backgroundColor: [
                                '#e74c3c', '#3498db', '#f39c12', '#2ecc71', '#9b59b6', '#1abc9c'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
                // Gráficos de reportes
                this.initializeReportCharts();
            }
            
            initializeReportCharts() {
                // Gráfico de posiciones para reportes
                const reportPosCtx = document.getElementById('reportPositionChart').getContext('2d');
                
                const positions = {};
                this.players.forEach(player => {
                    const pos = player.position || 'Sin posición';
                    positions[pos] = (positions[pos] || 0) + 1;
                });
                
                new Chart(reportPosCtx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(positions),
                        datasets: [{
                            label: 'Jugadores por Posición',
                            data: Object.values(positions),
                            backgroundColor: '#2ecc71'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
                // Gráfico de actividad
                const activityCtx = document.getElementById('reportActivityChart').getContext('2d');
                new Chart(activityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Registros',
                            data: [12, 19, 15, 22, 18, 25],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            fill: true
                        }, {
                            label: 'Búsquedas',
                            data: [8, 12, 10, 15, 20, 18],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
                
                // Gráfico de uso
                const usageCtx = document.getElementById('usageChart').getContext('2d');
                new Chart(usageCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Registro', 'Búsqueda', 'Gestión', 'Reportes'],
                        datasets: [{
                            data: [40, 30, 20, 10],
                            backgroundColor: [
                                '#2ecc71', '#3498db', '#f39c12', '#9b59b6'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // UTILIDADES
            generateId() {
                return 'id_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now().toString(36);
            }
            
            generateBiometricHash() {
                return 'bio_' + Math.random().toString(36).substr(2, 16) + '_' + Date.now().toString(36);
            }
            
            showNotification(message, type) {
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                
                // Posición diferente para móviles
                if (this.isMobile) {
                    notification.style.top = '10px';
                    notification.style.right = '10px';
                    notification.style.left = '10px';
                    notification.style.transform = 'translateX(0)';
                }
                
                notification.innerHTML = `
                    <i class="fas fa-${this.getNotificationIcon(type)}"></i>
                    <span>${message}</span>
                `;
                
                document.getElementById('notificationContainer').appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('show');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 5000);
            }
            
            getNotificationIcon(type) {
                switch(type) {
                    case 'success': return 'check-circle';
                    case 'error': return 'exclamation-circle';
                    case 'warning': return 'exclamation-triangle';
                    case 'info': return 'info-circle';
                    default: return 'info-circle';
                }
            }
            
            logActivity(action, type, details = '') {
                const activity = {
                    timestamp: new Date().toISOString(),
                    action: action,
                    type: type,
                    details: details
                };
                
                this.activityLog.push(activity);
                
                // Mantener solo los últimos 100 registros
                if (this.activityLog.length > 100) {
                    this.activityLog = this.activityLog.slice(-100);
                }
                
                this.saveData();
            }
            
            saveData() {
                localStorage.setItem('footballScoutingPlayers', JSON.stringify(this.players));
                localStorage.setItem('footballScoutingActivity', JSON.stringify(this.activityLog));
            }
        }
        
        // Inicializar el sistema cuando se carga la página
        document.addEventListener('DOMContentLoaded', function() {
            window.footballScoutingSystem = new FootballScoutingSystem();
        });
    </script>
</body>
</html>
